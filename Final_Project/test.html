<!DOCTYPE html>
<html>
 <head>
  <title>
   The DOC Fifty
  </title>
  <link href="doc.png" rel="icon" type="image/png"/>
  <link href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" rel="stylesheet"/>
  <link href="test.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&amp;display=swap" rel="stylesheet"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js">
  </script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js">
  </script>
  <script>
   var accessToken = 'pk.eyJ1IjoiZGFuaWVseHUwMiIsImEiOiJjbGt1MDkzNGgwMGV2M2xuMW84OTJqbDB3In0.NQElXto7ajMqUOraEvnFWQ';
        var trailsVisible = true;
        var stationsVisible = true;

        var satelliteLayer = L.tileLayer('https://api.mapbox.com/styles/v1/mapbox/satellite-v9/tiles/{z}/{x}/{y}?access_token=' + accessToken, {
            maxZoom: 19,
            attribution: '&copy; <a href="https://www.mapbox.com/">Mapbox</a>'
        });

        var openStreetMapLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        });

        function initialize() {
            var map = L.map("map", {
                center: [43.8657, -72.0370],
                zoom: 10,
                layers: [satelliteLayer]
            });

            var baseMaps = {
                "Satellite": satelliteLayer,
                "OpenStreetMap": openStreetMapLayer
            };

            L.control.layers(baseMaps).addTo(map);

            var trailsResponse = $.ajax({
                url: "The_DOC_Fifty_Trail.geojson",
                dataType: "json"
            });

            var stationsResponse = $.ajax({
                url: "The_DOC_Fifty_Support_Stations.geojson",
                dataType: "json"
            });

            $.when(trailsResponse, stationsResponse).done(function (trailsData, stationsData) {
                var trailslayer = L.geoJson(trailsData[0], {
                    style: {
                        color: "#FFFFFF",
                        weight: 3,
                        opacity: 1,
                        dashArray: "5, 5"
                    },
                    onEachFeature: function (feature, layer) {
                        layer.bindPopup("<b>Name: " +
                            feature.properties.name + "</b><br>" +
                            "Starting Point: " +
                            feature.properties.start_poin + "<br>" +
                            "Ending Point: " +
                            feature.properties.end_point + "<br>" +
                            "Elevation Gain (ft): " +
                            feature.properties.elev_ft + "<br>" +
                            "Mileage: " +
                            feature.properties.dist_miles);
                        layer.on('click', function (e) {
                            trailslayer.eachLayer(function (l) {
                                l.setStyle({
                                    color: "#FFFFFF",
                                    weight: 3,
                                    opacity: 1,
                                    dashArray: "5, 5"
                                });
                            });
                            layer.setStyle({
                                color: "#FFFF00"
                            });
                            var bounds = layer.getBounds();
                            var center = bounds.getCenter();
                            map.setView(center, 12);
                            e.target.openPopup();
                        });

                        layer.on('popupclose', function () {
                            map.setView([43.8657, -72.0370], 10);

                            if (map.hasLayer(openStreetMapLayer)) {
                                trailslayer.setStyle({
                                    color: "#006400"
                                });
                            } else {
                                trailslayer.setStyle({
                                    color: "#FFFFFF"
                                });
                            }
                        });
                    }
                }).addTo(map);

                var stationslayer = L.geoJson(stationsData[0], {
                    style: {
                        color: "#a1d76a",
                        weight: 2,
                        opacity: 1,
                        dashArray: "solid"
                    },
                    onEachFeature: function (feature, layer) {
                        var galleryHtml = '<div class="popup-gallery">'; // Start the gallery div
for (var i = 1; i <= 5; i++) {
    if (feature.properties['IMG' + i]) {
        galleryHtml += '<img src="' + feature.properties['IMG' + i] + '" alt="Trail Image" class="popup-image">';
    }
}
galleryHtml += '</div>'; // Close the gallery div
                        var popupContent = "<b>Station Name: " +
                            feature.properties.Name + "</b><br>" +
                            "Food: " +
                            feature.properties.Food + "<br>" +
                            "Total Miles Hiked: " +
                            feature.properties.Mileage + "<br>" +
                            "Total Elevation Gain (ft): " +
                            feature.properties.Elev_gain + "<br>" + "<br>" +
                            feature.properties.notes + "<br>" +
                            galleryHtml + "<br>" +
                            feature.properties.credits;

                        layer.bindPopup(popupContent, {maxWidth: 400});

                        layer.on('click', function () {
                            map.setView(layer.getLatLng(), 14);
                        });

                        layer.on('popupclose', function () {
                            map.setView([43.8657, -72.0370], 10);

                            if (map.hasLayer(openStreetMapLayer)) {
                                trailslayer.setStyle({
                                    color: "#006400"
                                });
                            } else {
                                trailslayer.setStyle({
                                    color: "#FFFFFF"
                                });
                            }
                        });
                    }
                }).addTo(map);

                $("#toggleTrails").show();
                $("#toggleStations").show();

                $("#toggleTrails").click(function () {
                    if (trailsVisible) {
                        trailsVisible = false;
                        trailslayer.removeFrom(map);
                    } else {
                        trailsVisible = true;
                        trailslayer.addTo(map);
                    }
                });

                $("#toggleStations").click(function () {
                    if (stationsVisible) {
                        stationsVisible = false;
                        stationslayer.removeFrom(map);
                    } else {
                        stationsVisible = true;
                        stationslayer.addTo(map);
                    }
                });

                $("#homeButton").click(function () {
                    map.setView([43.8657, -72.0370], 10);

                    if (map.hasLayer(openStreetMapLayer)) {
                        trailslayer.setStyle({
                            color: "#006400"
                        });
                    } else {
                        trailslayer.setStyle({
                            color: "#FFFFFF"
                        });
                    }

                    trailslayer.eachLayer(function (l) {
                        l.closePopup();
                    });
                    stationslayer.eachLayer(function (l) {
                        l.closePopup();
                    });
                });

                map.on('baselayerchange', function (event) {
                    if (event.name === 'OpenStreetMap') {
                        trailslayer.setStyle({
                            color: "#006400"
                        });
                    } else {
                        trailslayer.setStyle({
                            color: "#FFFFFF"
                        });
                    }
                });
            });
        }
  </script>
 </head>
 <nav>
  &lt;ul&gt;
    &lt;li&gt;&lt;a href="#home"&gt;Home&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href="#map"&gt;Map&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href="#about"&gt;About the Fifty&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href="#footer"&gt;Contact&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
 </nav>
 <body onload="initialize()">
  <header class="header" id="home">
   <div class="title-box" id="about">
    <div class="header-content">
     <div class="header-title">
      <div class="title-box">
       <h1>
        The DOC Fifty!
       </h1>
      </div>
     </div>
     <div class="header-description">
      <h2>
       A 54-mile hike from Moosilauke Ravine Lodge back to Dartmouth College's campus.
      </h2>
      <h3>
       By Daniel Xu (23X Hiker Coordinator)
      </h3>
     </div>
    </div>
   </div>
  </header>
  <div id="map">
  </div>
  <div id="buttons">
   <button class="toggle-button" id="toggleTrails">
    Toggle Trails Layer
   </button>
   <button class="toggle-button" id="toggleStations">
    Toggle Stations Layer
   </button>
   <button class="toggle-button" id="homeButton">
    Reset Zoom
   </button>
  </div>
  <div class="content">
    <h2><u>About the Fifty</u></h2>
        <p>
            The Fifty is a Dartmouth College tradition during which students across class years hike ~56 miles from Moosilauke Ravine Lodge all the way back to campus. 
            Barring the first short leg of the hike, the majority of the hike (~50 miles) occurs on the section of the Appalachian Trail that the Dartmouth Outing Club maintains. 
            This tradition occurs twice a year, once during Fall Term and another during Summer Term.
        </p>
        <p>
            Despite its title, the intention of the Fifty is not to hike 50 miles. If you pushed yourself and had fun, then you have embodied the spirit of the Fifty. 
            This event brings together people across Dartmouth's campus to celebrate the outdoors and each other. It is truly a special thing to watch hikers charge 
            through the "Tunnel of Love" to slap the DOC sign outside of Robinson Hall, officially marking the end of the Fifty, with complete strangers giving their 
            peers the most joyous hug of their lives.
        </p>
        <p>
            I had the opportunity to serve as Hiker Coordinator during the 23X Fifty. During this term, the event occurred from 7/14/2023 - 7/15/2023. There were nine teams, of which eight finished. 
            However, a member from every team was able to finish. Considering the staggeringly poor trail conditions, 
            this was a miracle. Some hikers hike it just to say that they did, others hike it to commemorate their Abenaki heritage. Regardless, the different values assigned 
            to this tradition make it so much more than a really long walk in the woods. 
        </p>
  </div>
  <footer id="footer">
   <p>
    © 2023 Daniel Xu. All rights reserved.
   </p>
  </footer>
  <a class="top" href="#">
   Back to Top ↑
  </a>
  <script>
   document.querySelector('.top').addEventListener('click', function(e) {
            e.preventDefault();
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
  </script>
  <script>
   document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        document.querySelector(this.getAttribute('href')).scrollIntoView({
            behavior: 'smooth'
        });
    });
});
  </script>
  <script>
   $(document).ready(function() {
    initialize();
});
  </script>
 </body>
</html>
